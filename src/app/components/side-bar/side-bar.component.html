<div class="layout-wrapper" [class.collapsed]="isCollapsed">
  <aside class="sidebar">
    <!-- Logo Section -->
    <div class="sidebar-header">
      <a class="logo-wrapper">
        <!-- <img *ngIf="logo" [src]="logo" alt="Logo" class="logo" /> -->
      </a>
      <button class="collapse-btn" (click)="toggleSidebar()" style="background-color: red;">
        <i class="ri-arrow-drop-right-line icon"></i>
      </button>
    </div>

    <!-- Navigation Menu -->
    <nav class="sidebar-nav">
      <ul class="nav-list">
        <li *ngFor="let group of menuGroups" 
            class="nav-group"
            [class.active]="isGroupActive(group)"
            [class.open]="group.isOpen">
          
          <!-- Main Menu Item -->
          <div class="main-item">
            <a class="nav-link cursor-pointer" 
               (click)="toggleSubmenu(group, $event)"
               [title]="isCollapsed ? group.title : ''">
              <i [class]="group.icon"></i>
              <span class="nav-text" *ngIf="!isCollapsed">{{ group.title }}</span>
              
              <!-- Dropdown Arrow -->
              <i *ngIf="!isCollapsed" 
                 class="submenu-arrow bi"
                 [class.bi-chevron-down]="group.isOpen"
                 [class.bi-chevron-right]="!group.isOpen"></i>
                 
              <span class="nav-indicator" 
                    *ngIf="isGroupActive(group) && !group.isOpen"></span>
            </a>
          </div>

          <!-- Submenu -->
          <ul *ngIf="group.isOpen && !isCollapsed" class="submenu-list">
            <li *ngFor="let menuItem of group.children" 
                class="submenu-item"
                [class.active]="router.isActive(menuItem.path, true)">
              <a class="submenu-link" 
                 [routerLink]="[menuItem.path]" 
                 [title]="menuItem.title">
                <i class="bi bi-dot"></i>
                <span class="submenu-text">{{ menuItem.title }}</span>
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </nav>

    <!-- Bottom Actions -->
    <div class="sidebar-footer">
      <button class="logout-btn" (click)="logout()" title="Logout">
        <i class="bi bi-box-arrow-right"></i>
        <span *ngIf="!isCollapsed">Logout</span>
      </button>
    </div>
  </aside>

  <!-- Main Content Area -->
  <main class="main-content">
    <!-- Mobile Header -->
    <div class="mobile-header">
      <button class="mobile-toggle" (click)="toggleSidebar()">
        <i class="bi bi-list"></i>
      </button>
      <div class="mobile-logo">
        <img *ngIf="logo" [src]="logo" alt="Logo" />
      </div>
      <div class="mobile-user">
        <i class="bi bi-person-circle"></i>
      </div>
    </div>

    <!-- Content Area -->
    <div class="content-wrapper">
      <ng-content></ng-content>
    </div>
  </main>
</div>