

<div class="pending-reversals-container">
  <!-- Header -->
  <div class="header">
    <div class="header-content">
      <h1>Pending Reversals</h1>
      
      <div class="search-section">
        <div class="search-box">
          <svg class="search-icon" viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" fill="none">
            <circle cx="11" cy="11" r="8" />
            <line x1="21" y1="21" x2="16.65" y2="16.65" />
          </svg>
          <input
            type="text"
            placeholder="Search by reversal ID, transaction ref, merchant name, reason..."
            (keyup)="searchReversals($event)"
            class="search-input"
          />
        </div>
        
        <div class="filters">
          <select [(ngModel)]="statusFilter" (change)="onStatusFilterChange()" class="filter-select">
            <option value="">All Statuses</option>
            <option value="PENDING">Pending</option>
            <option value="UNDER_REVIEW">Under Review</option>
            <option value="APPROVED">Approved</option>
            <option value="REJECTED">Rejected</option>
            <option value="PROCESSED">Processed</option>
            <option value="FAILED">Failed</option>
          </select>
          
          <select [(ngModel)]="merchantFilter" (change)="onMerchantFilterChange()" class="filter-select">
            <option value="">All Merchants</option>
            <option *ngFor="let merchant of merchants" [value]="merchant._id">
              {{ getMerchantDisplayName(merchant) }}
            </option>
          </select>
        </div>
        
        <div class="reversals-count" *ngIf="!loading">
          {{ filteredReversals.length }} reversal{{ filteredReversals.length !== 1 ? "s" : "" }}
        </div>
      </div>
      
      <button class="add-reversal-btn" (click)="openCreateReversalModal()">
        <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" fill="none">
          <path d="M12 5v14m-7-7h14" />
        </svg>
        Create Reversal
      </button>
    </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="error-message">
    {{ error }}
    <button class="close-btn" (click)="error = null">&times;</button>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner"></div>
    <span>Loading reversals...</span>
  </div>

  <!-- Reversals Table -->
  <div class="table-container" *ngIf="!loading && reversals.length > 0">
    <table class="reversals-table">
      <thead>
        <tr>
          <th (click)="changeSort('reversalId')" class="sortable">
            Reversal ID
            <span class="sort-indicator" *ngIf="sortBy === 'reversalId'">
              {{ sortOrder === 'asc' ? '↑' : '↓' }}
            </span>
          </th>
          <th (click)="changeSort('originalTransactionRef')" class="sortable">
            Original Tx Ref
            <span class="sort-indicator" *ngIf="sortBy === 'originalTransactionRef'">
              {{ sortOrder === 'asc' ? '↑' : '↓' }}
            </span>
          </th>
          <th>Merchant</th>
          <th (click)="changeSort('status')" class="sortable">
            Status
            <span class="sort-indicator" *ngIf="sortBy === 'status'">
              {{ sortOrder === 'asc' ? '↑' : '↓' }}
            </span>
          </th>
          <th (click)="changeSort('amount')" class="sortable">
            Amount
            <span class="sort-indicator" *ngIf="sortBy === 'amount'">
              {{ sortOrder === 'asc' ? '↑' : '↓' }}
            </span>
          </th>
          <th>Reason</th>
          <th>Channel</th>
          <th (click)="changeSort('createdAt')" class="sortable">
            Created
            <span class="sort-indicator" *ngIf="sortBy === 'createdAt'">
              {{ sortOrder === 'asc' ? '↑' : '↓' }}
            </span>
          </th>
          <th>Reviewed By</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let reversal of filteredReversals" class="table-row">
          <td class="reversal-id">{{ reversal.reversalId }}</td>
          <td class="transaction-ref">{{ reversal.originalTransactionRef }}</td>
          <td class="merchant-name">{{ getMerchantName(reversal.reversalTransactionData.merchantId) }}</td>
          <td>
            <span [class]="'status-badge ' + getStatusClass(reversal.status)">
              {{ reversal.status }}
            </span>
          </td>
          <td class="amount">{{ formatCurrency(reversal.reversalTransactionData.amount, reversal.reversalTransactionData.currency) }}</td>
          <td class="reason">{{ reversal.reversalTransactionData.reason }}</td>
          <td class="channel">{{ reversal.reversalTransactionData.channel }}</td>
          <td class="date">{{ formatDate(reversal.createdAt) }}</td>
          <td class="reviewed-by">{{ reversal.reviewedBy || '-' }}</td>
          <td class="actions">
            <div class="action-buttons">
              <button class="action-btn view-btn" (click)="openDetailsModal(reversal)" title="View Details">
                <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" fill="none">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                  <circle cx="12" cy="12" r="3"/>
                </svg>
              </button>
              
              <button 
                *ngIf="canReview(reversal)" 
                class="action-btn review-btn" 
                (click)="openReviewModal(reversal)"
                title="Review"
              >
                <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" fill="none">
                  <path d="M9 11l3 3L22 4"/>
                  <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/>
                </svg>
              </button>
              
              <button 
                *ngIf="canProcess(reversal)" 
                class="action-btn process-btn" 
                (click)="openProcessModal(reversal)"
                title="Process"
              >
                <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" fill="none">
                  <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                  <path d="M22 4L12 14.01l-3-3"/>
                </svg>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination" *ngIf="!loading && totalPages > 1">
    <div class="pagination-info">
      Showing {{ (currentPage - 1) * pageSize + 1 }} to {{ Math.min(currentPage * pageSize, totalItems) }} of {{ totalItems }} entries
    </div>
    
    <div class="pagination-controls">
      <button 
        class="page-btn" 
        [disabled]="currentPage === 1" 
        (click)="changePage(1)"
        title="First Page"
      >
        ««
      </button>
      
      <button 
        class="page-btn" 
        [disabled]="currentPage === 1" 
        (click)="changePage(currentPage - 1)"
        title="Previous Page"
      >
        ‹
      </button>
      
      <span class="page-numbers">
        <button 
          *ngFor="let page of getPageNumbers()" 
          class="page-btn"
          [class.active]="page === currentPage"
          (click)="isNumber(page) ? changePage(page) : null"
          [disabled]="page === '...'"
        >
          {{ page }}
        </button>
      </span>
      
      <button 
        class="page-btn" 
        [disabled]="currentPage === totalPages" 
        (click)="changePage(currentPage + 1)"
        title="Next Page"
      >
        ›
      </button>
      
      <button 
        class="page-btn" 
        [disabled]="currentPage === totalPages" 
        (click)="changePage(totalPages)"
        title="Last Page"
      >
        »»
      </button>
    </div>
    
    <div class="page-size-selector">
      <label>Show:</label>
      <select [(ngModel)]="pageSize" (change)="onPageSizeChange()">
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="50">50</option>
        <option value="100">100</option>
      </select>
      <span>entries</span>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && reversals.length === 0" class="empty-state">
    <svg viewBox="0 0 24 24" width="48" height="48" stroke="currentColor" fill="none">
      <path d="M3 6h18l-2 13H5L3 6z"/>
      <path d="M3 6L2 2H0"/>
      <circle cx="9" cy="20" r="1"/>
      <circle cx="20" cy="20" r="1"/>
    </svg>
    <p>No reversals found. Click "Create Reversal" to add one.</p>
  </div>

<!-- Create Reversal Modal -->
<div class="modal" *ngIf="showCreateReversalModal">
  <div class="modal-content large-modal">
    <div class="modal-header">
      <h2>Create New Reversal</h2>
      <button class="close-btn" (click)="closeCreateReversalModal()">&times;</button>
    </div>

    <form [formGroup]="createReversalForm" (ngSubmit)="submitCreateReversal()">
      <!-- Transaction Reference Section -->
      <div class="form-section">
        <h3>Transaction Reference</h3>
        <div class="form-grid">
          <div class="form-group full-width">
            <label for="originalTransactionRef">Transaction Reference *</label>
            <div class="input-with-button">
              <input 
                id="originalTransactionRef" 
                formControlName="originalTransactionRef" 
                placeholder="Enter transaction reference"
                (input)="resetTransactionVerification()"
              />
              <button 
                type="button" 
                class="verify-btn"
                (click)="verifyTransaction()"
                [disabled]="verifyingTransaction || !createReversalForm.get('originalTransactionRef')?.value?.trim()"
              >
                <span *ngIf="!verifyingTransaction">Verify</span>
                <span *ngIf="verifyingTransaction">
                  <div class="mini-spinner"></div>
                  Verifying...
                </span>
              </button>
            </div>
            
            <!-- Verification Error -->
            <div *ngIf="transactionVerificationError" class="verification-error">
              <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" fill="none">
                <circle cx="12" cy="12" r="10"/>
                <line x1="15" y1="9" x2="9" y2="15"/>
                <line x1="9" y1="9" x2="15" y2="15"/>
              </svg>
              {{ transactionVerificationError }}
            </div>
          </div>
        </div>
      </div>

      <!-- Transaction Verification Results -->
      <div class="form-section" *ngIf="verifiedTransaction">
        <h3>
          <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" fill="none" class="success-icon">
            <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
            <path d="M22 4L12 14.01l-3-3"/>
          </svg>
          Verified Transaction Details
        </h3>
        <div class="transaction-details">
          <div class="details-grid">
            <div class="detail-item">
              <label>Transaction ID</label>
              <span>{{ verifiedTransaction._id }}</span>
            </div>
            <div class="detail-item">
              <label>Reference</label>
              <span>{{ verifiedTransaction.transactionRef }}</span>
            </div>
            <div class="detail-item">
              <label>Status</label>
              <span [class]="'status-badge ' + getStatusClass(verifiedTransaction.status)">
                {{ verifiedTransaction.status }}
              </span>
            </div>
            <div class="detail-item">
              <label>Type</label>
              <span>{{ verifiedTransaction.transaction_type }}</span>
            </div>
            <div class="detail-item">
              <label>Merchant</label>
              <span>{{ getMerchantName(verifiedTransaction.merchantId) }}</span>
            </div>
            <div class="detail-item">
              <label>Amount</label>
              <span class="amount-highlight">{{ formatCurrency(verifiedTransaction.amount, verifiedTransaction.currency) }}</span>
            </div>
            <div class="detail-item">
              <label>Actual Amount</label>
              <span>{{ formatCurrency(verifiedTransaction.actualAmount, verifiedTransaction.currency) }}</span>
            </div>
            <div class="detail-item">
              <label>Charges</label>
              <span>{{ formatCurrency(verifiedTransaction.charges, verifiedTransaction.currency) }}</span>
            </div>
            <div class="detail-item">
              <label>Operator</label>
              <span>{{ verifiedTransaction.operator }}</span>
            </div>
            <div class="detail-item">
              <label>Channel</label>
              <span>{{ verifiedTransaction.channel }}</span>
            </div>
            <div class="detail-item">
              <label>Recipient</label>
              <span>{{ verifiedTransaction.recipient_account_name }} ({{ verifiedTransaction.recipient_account_number }})</span>
            </div>
            <div class="detail-item">
              <label>Payment Account</label>
              <span>{{ verifiedTransaction.payment_account_name }} ({{ verifiedTransaction.payment_account_number }})</span>
            </div>
            <div class="detail-item">
              <label>Date</label>
              <span>{{ formatDate(verifiedTransaction.createdAt) }}</span>
            </div>
            <div class="detail-item full-width" *ngIf="verifiedTransaction.description">
              <label>Description</label>
              <span>{{ verifiedTransaction.description }}</span>
            </div>
            <div class="detail-item full-width" *ngIf="verifiedTransaction.reason">
              <label>Reason</label>
              <span>{{ verifiedTransaction.reason }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Reversal Details Form - Only shown after verification -->
      <!-- <div class="form-section" *ngIf="verifiedTransaction" formGroupName="reversalTransactionData">
        <h3>Reversal Details</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="description">Description *</label>
            <input id="description" formControlName="description" placeholder="Reversal description" />
          </div>
          <div class="form-group">
            <label for="reason">Reason *</label>
            <input id="reason" formControlName="reason" placeholder="Reason for reversal" />
          </div>
          <div class="form-group">
            <label for="merchantId">Merchant *</label>
            <select id="merchantId" formControlName="merchantId" class="merchant-select">
              <option value="">Select a merchant</option>
              <option *ngFor="let merchant of merchants" [value]="merchant._id">
                {{ getMerchantDisplayName(merchant) }}
              </option>
            </select>
          </div>
          <div class="form-group">
            <label for="operator">Operator *</label>
            <select id="operator" formControlName="operator">
              <option value="">Select operator</option>
              <option *ngFor="let op of operators" [value]="op">{{ op }}</option>
            </select>
          </div>
        </div>
      </div>

      <div class="form-section" *ngIf="verifiedTransaction" formGroupName="reversalTransactionData">
        <h3>Account Details</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="recipient_account_issuer">Recipient Account Issuer *</label>
            <input id="recipient_account_issuer" formControlName="recipient_account_issuer" placeholder="Recipient account issuer" />
          </div>
          <div class="form-group">
            <label for="recipient_account_number">Recipient Account Number *</label>
            <input id="recipient_account_number" formControlName="recipient_account_number" placeholder="Recipient account number" />
          </div>
          <div class="form-group">
            <label for="recipient_account_name">Recipient Account Name *</label>
            <input id="recipient_account_name" formControlName="recipient_account_name" placeholder="Recipient account name" />
          </div>
          <div class="form-group">
            <label for="payment_account_number">Payment Account Number *</label>
            <input id="payment_account_number" formControlName="payment_account_number" placeholder="Payment account number" />
          </div>
          <div class="form-group">
            <label for="payment_account_issuer">Payment Account Issuer *</label>
            <input id="payment_account_issuer" formControlName="payment_account_issuer" placeholder="Payment account issuer" />
          </div>
          <div class="form-group">
            <label for="payment_account_name">Payment Account Name *</label>
            <input id="payment_account_name" formControlName="payment_account_name" placeholder="Payment account name" />
          </div>
          <div class="form-group">
            <label for="recipient_account_type">Recipient Account Type *</label>
            <input id="recipient_account_type" formControlName="recipient_account_type" placeholder="Recipient account type" />
          </div>
          <div class="form-group">
            <label for="payment_account_type">Payment Account Type *</label>
            <input id="payment_account_type" formControlName="payment_account_type" placeholder="Payment account type" />
          </div>
        </div>
      </div>

      <div class="form-section" *ngIf="verifiedTransaction" formGroupName="reversalTransactionData">
        <h3>Amount & Channel</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="amount">Amount *</label>
            <input id="amount" type="number" formControlName="amount" placeholder="Amount" />
          </div>
          <div class="form-group">
            <label for="actualAmount">Actual Amount *</label>
            <input id="actualAmount" type="number" formControlName="actualAmount" placeholder="Actual amount" />
          </div>
          <div class="form-group">
            <label for="currency">Currency *</label>
            <select id="currency" formControlName="currency">
              <option value="GHS">GHS</option>
              <option value="USD">USD</option>
              <option value="EUR">EUR</option>
            </select>
          </div>
          <div class="form-group">
            <label for="channel">Channel *</label>
            <input id="channel" formControlName="channel" placeholder="Channel" />
          </div>
          <div class="form-group">
            <label for="charges">Charges</label>
            <input id="charges" type="number" formControlName="charges" placeholder="Charges" />
          </div>
        </div>
      </div> -->

      <div class="modal-actions">
        <button type="button" class="cancel-btn" (click)="closeCreateReversalModal()">Cancel</button>
        <button 
          type="submit" 
          class="submit-btn" 
          [disabled]="!createReversalForm.valid || !verifiedTransaction || loading"
        >
          <span *ngIf="!loading">Create Reversal</span>
          <span *ngIf="loading">
            <div class="mini-spinner"></div>
            Creating...
          </span>
        </button>
      </div>
    </form>
  </div>
</div>

  <!-- Review Modal -->
  <div class="modal" *ngIf="showReviewModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Review Reversal</h2>
        <button class="close-btn" (click)="closeReviewModal()">&times;</button>
      </div>

      <div *ngIf="selectedReversal" class="reversal-info">
        <div class="info-row">
          <span class="label">Reversal ID:</span>
          <span class="value">{{ selectedReversal.reversalId }}</span>
        </div>
        <div class="info-row">
          <span class="label">Original Transaction:</span>
          <span class="value">{{ selectedReversal.originalTransactionRef }}</span>
        </div>
        <div class="info-row">
          <span class="label">Amount:</span>
          <span class="value">{{ formatCurrency(selectedReversal.reversalTransactionData.amount, selectedReversal.reversalTransactionData.currency) }}</span>
        </div>
        <div class="info-row">
          <span class="label">Reason:</span>
          <span class="value">{{ selectedReversal.reversalTransactionData.reason }}</span>
        </div>
      </div>

      <form [formGroup]="reviewForm" (ngSubmit)="submitReview()">
        <div class="form-group">
          <label for="action">Action</label>
          <select id="action" formControlName="action" (change)="onReviewActionChange()">
            <option value="">Select action</option>
            <option value="APPROVE">Approve</option>
            <option value="REJECT">Reject</option>
          </select>
        </div>

        <!-- <div class="form-group">
          <label for="reviewedBy">Reviewed By</label>
          <input id="reviewedBy" formControlName="reviewedBy" placeholder="Your name/ID" />
        </div> -->

        <div class="form-group" *ngIf="reviewForm.get('action')?.value === 'REJECT'">
          <label for="rejectionReason">Rejection Reason</label>
          <textarea id="rejectionReason" formControlName="rejectionReason" placeholder="Reason for rejection" rows="3"></textarea>
        </div>

        <div class="form-group">
          <label for="notes">Notes (Optional)</label>
          <textarea id="notes" formControlName="notes" placeholder="Additional notes" rows="2"></textarea>
        </div>

                <div class="user-info">
          <p><strong>Reviewing as:</strong> {{ currentUser?.name || currentUser?._id || 'Unknown User' }}</p>
        </div>

        <div class="modal-actions">
          <button type="button" class="cancel-btn" (click)="closeReviewModal()">Cancel</button>
          <button type="submit" class="submit-btn" [disabled]="!reviewForm.valid || loading">
            Submit Review
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Process Modal -->
  <div class="modal" *ngIf="showProcessModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Process Approved Reversal</h2>
        <button class="close-btn" (click)="closeProcessModal()">&times;</button>
      </div>

      <div *ngIf="selectedReversal" class="reversal-info">
        <div class="info-row">
          <span class="label">Reversal ID:</span>
          <span class="value">{{ selectedReversal.reversalId }}</span>
        </div>
        <div class="info-row">
          <span class="label">Status:</span>
          <span class="value approved">{{ selectedReversal.status }}</span>
        </div>
        <div class="info-row">
          <span class="label">Approved By:</span>
          <span class="value">{{ selectedReversal.approvedBy || selectedReversal.reviewedBy }}</span>
        </div>
      </div>

      <form [formGroup]="processForm" (ngSubmit)="submitProcess()">
        <!-- <div class="form-group">
          <label for="processedBy">Processed By</label>
          <input id="processedBy" formControlName="processedBy" placeholder="Your name/ID" />
        </div> -->

        <div class="warning-section">
          <p><strong>Warning:</strong> This action will move the reversal to the transactions database and cannot be undone.</p>
        </div>

                <div class="user-info">
          <p><strong>Processing as:</strong> {{ currentUser?.name || currentUser?._id || 'Unknown User' }}</p>
        </div>

        <div class="modal-actions">
          <button type="button" class="cancel-btn" (click)="closeProcessModal()">Cancel</button>
          <button type="submit" class="submit-btn process-btn" [disabled]="!processForm.valid || loading">
            Process Reversal
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Details Modal -->
  <div class="modal" *ngIf="showDetailsModal">
    <div class="modal-content large-modal">
      <div class="modal-header">
        <h2>Reversal Details</h2>
        <button class="close-btn" (click)="closeDetailsModal()">&times;</button>
      </div>

      <div *ngIf="selectedReversal" class="details-content">
        <div class="details-section">
          <h3>Basic Information</h3>
          <div class="details-grid">
            <div class="detail-item">
              <label>Reversal ID</label>
              <span>{{ selectedReversal.reversalId }}</span>
            </div>
            <div class="detail-item">
              <label>Status</label>
              <span [class]="'status-text ' + getStatusClass(selectedReversal.status)">{{ selectedReversal.status }}</span>
            </div>
            <div class="detail-item">
              <label>Original Transaction</label>
              <span>{{ selectedReversal.originalTransactionRef }}</span>
            </div>
            <div class="detail-item">
              <label>Created By</label>
              <span>{{ selectedReversal.createdBy }}</span>
            </div>
            <div class="detail-item">
              <label>Created At</label>
              <span>{{ formatDate(selectedReversal.createdAt) }}</span>
            </div>
          </div>
        </div>

        <div class="details-section">
          <h3>Transaction Details</h3>
          <div class="details-grid">
            <div class="detail-item">
              <label>Merchant</label>
              <span>{{ getMerchantName(selectedReversal.reversalTransactionData.merchantId) }}</span>
            </div>
            <div class="detail-item">
              <label>Amount</label>
              <span>{{ formatCurrency(selectedReversal.reversalTransactionData.amount, selectedReversal.reversalTransactionData.currency) }}</span>
            </div>
            <div class="detail-item">
              <label>Actual Amount</label>
              <span>{{ formatCurrency(selectedReversal.reversalTransactionData.actualAmount, selectedReversal.reversalTransactionData.currency) }}</span>
            </div>
            <div class="detail-item">
              <label>Currency</label>
              <span>{{ selectedReversal.reversalTransactionData.currency }}</span>
            </div>
            <div class="detail-item">
              <label>Channel</label>
              <span>{{ selectedReversal.reversalTransactionData.channel }}</span>
            </div>
            <div class="detail-item">
              <label>Operator</label>
              <span>{{ selectedReversal.reversalTransactionData.operator }}</span>
            </div>
          </div>
        </div>

        <div class="details-section">
          <h3>Reason & Description</h3>
          <div class="text-details">
            <div class="text-item">
              <label>Reason</label>
              <p>{{ selectedReversal.reversalTransactionData.reason }}</p>
            </div>
            <div class="text-item">
              <label>Description</label>
              <p>{{ selectedReversal.reversalTransactionData.description }}</p>
            </div>
          </div>
        </div>

        <div class="details-section" *ngIf="selectedReversal.reviewedBy">
          <h3>Review Information</h3>
          <div class="details-grid">
            <div class="detail-item">
              <label>Reviewed By</label>
              <span>{{ selectedReversal.reviewedBy }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedReversal.reviewedAt">
              <label>Reviewed At</label>
              <span>{{ formatDate(selectedReversal.reviewedAt) }}</span>
            </div>
            <div class="detail-item" *ngIf="selectedReversal.rejectionReason">
              <label>Rejection Reason</label>
              <span>{{ selectedReversal.rejectionReason }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-actions">
        <button type="button" class="cancel-btn" (click)="closeDetailsModal()">Close</button>
      </div>
    </div>
  </div>
</div>